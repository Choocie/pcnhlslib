#include "dut.h"

array<output_t, static_pow2(LUT_SIZE)> expLUT =
{ 1.     , 1.     , 0.96875, 0.96875, 0.96875, 0.9375 , 0.9375 , 0.9375 , 0.9375 ,
  0.90625, 0.90625, 0.90625, 0.875  , 0.875  , 0.875  , 0.875  , 0.84375, 0.84375,
  0.84375, 0.84375, 0.8125 , 0.8125 , 0.8125 , 0.8125 , 0.78125, 0.78125, 0.78125,
  0.78125, 0.75   , 0.75   , 0.75   , 0.75   , 0.71875, 0.71875, 0.71875, 0.71875,
  0.71875, 0.6875 , 0.6875 , 0.6875 , 0.6875 , 0.65625, 0.65625, 0.65625, 0.65625,
  0.65625, 0.625  , 0.625  , 0.625  , 0.625  , 0.625  , 0.59375, 0.59375, 0.59375,
  0.59375, 0.59375, 0.59375, 0.5625 , 0.5625 , 0.5625 , 0.5625 , 0.5625 , 0.53125,
  0.53125, 0.53125, 0.53125, 0.53125, 0.53125, 0.5    , 0.5    , 0.5    , 0.5    ,
  0.5    , 0.5    , 0.5    , 0.46875, 0.46875, 0.46875, 0.46875, 0.46875, 0.46875,
  0.46875, 0.4375 , 0.4375 , 0.4375 , 0.4375 , 0.4375 , 0.4375 , 0.4375 , 0.40625,
  0.40625, 0.40625, 0.40625, 0.40625, 0.40625, 0.40625, 0.40625, 0.375  , 0.375  ,
  0.375  , 0.375  , 0.375  , 0.375  , 0.375  , 0.375  , 0.34375, 0.34375, 0.34375,
  0.34375, 0.34375, 0.34375, 0.34375, 0.34375, 0.34375, 0.34375, 0.3125 , 0.3125 ,
  0.3125 , 0.3125 , 0.3125 , 0.3125 , 0.3125 , 0.3125 , 0.3125 , 0.3125 , 0.28125,
  0.28125, 0.28125, 0.28125, 0.28125, 0.28125, 0.28125, 0.28125, 0.28125, 0.28125,
  0.28125, 0.25   , 0.25   , 0.25   , 0.25   , 0.25   , 0.25   , 0.25   , 0.25   ,
  0.25   , 0.25   , 0.25   , 0.25   , 0.25   , 0.21875, 0.21875, 0.21875, 0.21875,
  0.21875, 0.21875, 0.21875, 0.21875, 0.21875, 0.21875, 0.21875, 0.21875, 0.21875,
  0.21875, 0.21875, 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 ,
  0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 , 0.1875 ,
  0.1875 , 0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625,
  0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625, 0.15625,
  0.15625, 0.15625, 0.15625, 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  ,
  0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  ,
  0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  , 0.125  ,
  0.125  , 0.125  , 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375,
  0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375,
  0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375, 0.09375,
  0.09375, 0.09375, 0.09375, 0};
 

void dut(hls::stream<array<input_t,K>>      &distanceIn,
         hls::stream<array<output_t,K-1>>   &distanceExp) {
    #pragma HLS dataflow
    exponential<input_t,output_t,K,II,LUT_SIZE>(distanceIn, distanceExp,expLUT);
}